{"version":3,"file":"dx-react-core.umd.js","sources":["../src/plugin-based/constants.js","../src/plugin-based/plugin-indexer.jsx","../src/plugin-based/template-placeholder.jsx","../src/plugin-based/plugin-host.jsx","../src/plugin-based/plugin.jsx","../src/plugin-based/helpers.js","../src/plugin-based/action.jsx","../src/plugin-based/getter.jsx","../src/plugin-based/template.jsx","../src/plugin-based/template-connector.jsx","../src/draggable/touch-strategy.js","../src/draggable/gesture-cover.js","../src/draggable/mouse-strategy.js","../src/draggable/shared-events.js","../src/draggable/selection-utils.js","../src/draggable.jsx","../src/drag-drop/provider.jsx","../src/drag-drop/source.jsx","../src/drag-drop/target.jsx","../src/ref-holder.jsx","../src/sizer.jsx","../src/utils/connect-props.jsx","../src/utils/state-helper.js","../src/utils/with-components.jsx"],"sourcesContent":["export const PLUGIN_HOST_CONTEXT = 'dxcore_pluginHost_context';\nexport const POSITION_CONTEXT = 'dxcore_position_context';\nexport const TEMPLATE_HOST_CONTEXT = 'dxcore_templateHost_context';\n\nexport const RERENDER_TEMPLATE_EVENT = Symbol('rerenderTemplate');\nexport const RERENDER_TEMPLATE_SCOPE_EVENT = Symbol('rerenderTemplateScope');\nexport const UPDATE_CONNECTION_EVENT = Symbol('updateConnection');\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { POSITION_CONTEXT } from './constants';\n\nexport const PluginIndexer = (\n  { children },\n  { [POSITION_CONTEXT]: position },\n) => (\n  <React.Fragment>\n    {\n      React.Children.map(children, (child, index) => {\n        if (!child || !child.type) return child;\n\n        const childPosition = () => {\n          const calculatedPosition = (position && position()) || [];\n          return [...calculatedPosition, index];\n        };\n\n        return (\n          <PluginIndexerContext position={childPosition}>\n            {child}\n          </PluginIndexerContext>\n        );\n      })\n    }\n  </React.Fragment>\n);\n\nPluginIndexer.propTypes = {\n  children: PropTypes.node,\n};\n\nPluginIndexer.defaultProps = {\n  children: undefined,\n};\n\nPluginIndexer.contextTypes = {\n  [POSITION_CONTEXT]: PropTypes.func,\n};\n\nclass PluginIndexerContext extends React.Component {\n  getChildContext() {\n    const { position } = this.props;\n    return {\n      [POSITION_CONTEXT]: position,\n    };\n  }\n\n  render() {\n    const { children } = this.props;\n    return children;\n  }\n}\n\nPluginIndexerContext.propTypes = {\n  position: PropTypes.func.isRequired,\n  children: PropTypes.node.isRequired,\n};\n\nPluginIndexerContext.childContextTypes = {\n  [POSITION_CONTEXT]: PropTypes.func,\n};\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { shallowEqual } from '@devexpress/dx-core';\nimport {\n  PLUGIN_HOST_CONTEXT, RERENDER_TEMPLATE_EVENT,\n  TEMPLATE_HOST_CONTEXT, RERENDER_TEMPLATE_SCOPE_EVENT,\n} from './constants';\n\nexport class TemplatePlaceholder extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n    const { name: propsName } = this.props;\n\n    this.subscription = {\n      [RERENDER_TEMPLATE_EVENT]: (id) => {\n        if (this.template && this.template.id === id) {\n          this.forceUpdate();\n        }\n      },\n      [RERENDER_TEMPLATE_SCOPE_EVENT]: (name) => {\n        if (propsName === name) {\n          this.forceUpdate();\n        }\n      },\n    };\n  }\n\n  getChildContext() {\n    return {\n      [TEMPLATE_HOST_CONTEXT]: {\n        templates: () => this.restTemplates,\n        params: () => this.params,\n      },\n    };\n  }\n\n  componentDidMount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.context;\n    pluginHost.registerSubscription(this.subscription);\n  }\n\n  shouldComponentUpdate(nextProps) {\n    const { params } = this.getRenderingData(nextProps);\n    const { children } = this.props;\n    return !shallowEqual(params, this.params) || children !== nextProps.children;\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.context;\n    pluginHost.unregisterSubscription(this.subscription);\n  }\n\n  getRenderingData(props) {\n    const { name, params } = props;\n    if (name) {\n      const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.context;\n      return {\n        params,\n        templates: pluginHost.collect(`${name}Template`)\n          .filter(template => template.predicate(params))\n          .reverse(),\n      };\n    }\n    const { [TEMPLATE_HOST_CONTEXT]: templateHost } = this.context;\n    return {\n      params: params || templateHost.params(),\n      templates: templateHost.templates(),\n    };\n  }\n\n  render() {\n    const { params, templates } = this.getRenderingData(this.props);\n\n    this.params = params;\n    [this.template] = templates;\n    this.restTemplates = templates.slice(1);\n\n    let content = null;\n    if (this.template) {\n      const { children: templateContent } = this.template;\n\n      content = templateContent() || null;\n      if (content && typeof content === 'function') {\n        content = content(params);\n      }\n    }\n\n    const { children: templatePlaceholder } = this.props;\n    return templatePlaceholder ? templatePlaceholder(content) : content;\n  }\n}\n\nTemplatePlaceholder.propTypes = {\n  name: PropTypes.string, // eslint-disable-line react/no-unused-prop-types\n  params: PropTypes.object, // eslint-disable-line react/no-unused-prop-types\n  children: PropTypes.func,\n};\n\nTemplatePlaceholder.defaultProps = {\n  name: undefined,\n  params: undefined,\n  children: undefined,\n};\n\nTemplatePlaceholder.contextTypes = {\n  [TEMPLATE_HOST_CONTEXT]: PropTypes.object,\n  [PLUGIN_HOST_CONTEXT]: PropTypes.object.isRequired,\n};\n\nTemplatePlaceholder.childContextTypes = {\n  [TEMPLATE_HOST_CONTEXT]: PropTypes.object.isRequired,\n};\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { PluginHost as PluginHostCore } from '@devexpress/dx-core';\nimport { PluginIndexer } from './plugin-indexer';\nimport { TemplatePlaceholder } from './template-placeholder';\nimport { PLUGIN_HOST_CONTEXT } from './constants';\n\nexport class PluginHost extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.host = new PluginHostCore();\n  }\n\n  getChildContext() {\n    return {\n      [PLUGIN_HOST_CONTEXT]: this.host,\n    };\n  }\n\n  render() {\n    const { children } = this.props;\n\n    return (\n      <React.Fragment>\n        <PluginIndexer>\n          {children}\n        </PluginIndexer>\n        <TemplatePlaceholder name=\"root\" />\n      </React.Fragment>\n    );\n  }\n}\n\nPluginHost.propTypes = {\n  children: PropTypes.node,\n};\n\nPluginHost.defaultProps = {\n  children: undefined,\n};\n\nPluginHost.childContextTypes = {\n  [PLUGIN_HOST_CONTEXT]: PropTypes.object.isRequired,\n};\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { PluginIndexer } from './plugin-indexer';\nimport { PLUGIN_HOST_CONTEXT, POSITION_CONTEXT } from './constants';\n\nexport class Plugin extends React.PureComponent {\n  componentDidMount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost, [POSITION_CONTEXT]: position } = this.context;\n    const { name, dependencies } = this.props;\n    this.plugin = {\n      position,\n      name,\n      dependencies,\n      container: true,\n    };\n    pluginHost.registerPlugin(this.plugin);\n  }\n\n  componentDidUpdate() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.context;\n    pluginHost.ensureDependencies();\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.context;\n    pluginHost.unregisterPlugin(this.plugin);\n  }\n\n  render() {\n    const { children } = this.props;\n    return (\n      <PluginIndexer>\n        {children}\n      </PluginIndexer>\n    );\n  }\n}\n\nPlugin.propTypes = {\n  children: PropTypes.node.isRequired,\n  name: PropTypes.string,\n  dependencies: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string,\n    optional: PropTypes.bool,\n  })),\n};\n\nPlugin.defaultProps = {\n  name: '',\n  dependencies: [],\n};\n\nPlugin.contextTypes = {\n  [PLUGIN_HOST_CONTEXT]: PropTypes.object.isRequired,\n  [POSITION_CONTEXT]: PropTypes.func.isRequired,\n};\n","import { shallowEqual } from '@devexpress/dx-core';\n\nexport const getAvailableGetters = (\n  pluginHost,\n  getGetterValue = getterName => pluginHost.get(`${getterName}Getter`),\n) => {\n  const trackedDependencies = {};\n\n  let getters;\n  if (typeof Proxy !== 'undefined') {\n    getters = new Proxy({}, {\n      get(target, prop) {\n        if (typeof prop !== 'string') return undefined;\n        const result = getGetterValue(prop);\n        trackedDependencies[prop] = result;\n        return result;\n      },\n      getOwnPropertyDescriptor(target, prop) {\n        return { configurable: true, enumerable: true, value: this.get(target, prop) };\n      },\n      ownKeys() {\n        return pluginHost.knownKeys('Getter');\n      },\n    });\n  } else {\n    getters = pluginHost.knownKeys('Getter')\n      .reduce((acc, getterName) => {\n        Object.defineProperty(acc, getterName, {\n          get: () => {\n            const result = getGetterValue(getterName);\n            trackedDependencies[getterName] = result;\n            return result;\n          },\n        });\n        return acc;\n      }, {});\n  }\n\n  return { getters, trackedDependencies };\n};\n\nexport const isTrackedDependenciesChanged = (\n  pluginHost,\n  prevTrackedDependencies,\n  getGetterValue = getterName => pluginHost.get(`${getterName}Getter`),\n) => {\n  const trackedDependencies = Object.keys(prevTrackedDependencies)\n    .reduce((acc, getterName) => Object.assign(acc, {\n      [getterName]: getGetterValue(getterName),\n    }), {});\n\n  return !shallowEqual(prevTrackedDependencies, trackedDependencies);\n};\n\nexport const getAvailableActions = (\n  pluginHost,\n  getAction = actionName => pluginHost.collect(`${actionName}Action`).slice().reverse()[0],\n) => {\n  let actions;\n  if (typeof Proxy !== 'undefined') {\n    actions = new Proxy({}, {\n      get(target, prop) {\n        if (typeof prop !== 'string') return undefined;\n        return getAction(prop);\n      },\n      getOwnPropertyDescriptor(target, prop) {\n        return { configurable: true, enumerable: true, value: this.get(target, prop) };\n      },\n      ownKeys() {\n        return pluginHost.knownKeys('Action');\n      },\n    });\n  } else {\n    actions = pluginHost.knownKeys('Action')\n      .reduce((acc, actionName) => {\n        Object.defineProperty(acc, actionName, {\n          get: () => getAction(actionName),\n        });\n        return acc;\n      }, {});\n  }\n  return actions;\n};\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport {\n  getAvailableGetters,\n  getAvailableActions,\n} from './helpers';\nimport { PLUGIN_HOST_CONTEXT, POSITION_CONTEXT } from './constants';\n\nexport class Action extends React.PureComponent {\n  constructor(props, context) {\n    super(props, context);\n\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost, [POSITION_CONTEXT]: positionContext } = context;\n    const { name } = props;\n\n    this.plugin = {\n      position: () => positionContext(),\n      [`${name}Action`]: (params) => {\n        const { action } = this.props;\n        const { getters } = getAvailableGetters(\n          pluginHost,\n          getterName => pluginHost.get(`${getterName}Getter`, this.plugin),\n        );\n        let nextParams = params;\n        const actions = getAvailableActions(\n          pluginHost,\n          actionName => (actionName === name\n            ? (newParams) => { nextParams = newParams; }\n            : pluginHost.collect(`${actionName}Action`, this.plugin).slice().reverse()[0]),\n        );\n        action(params, getters, actions);\n        const nextAction = pluginHost.collect(`${name}Action`, this.plugin).slice().reverse()[0];\n        if (nextAction) {\n          nextAction(nextParams);\n        }\n      },\n    };\n\n    pluginHost.registerPlugin(this.plugin);\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.context;\n\n    pluginHost.unregisterPlugin(this.plugin);\n  }\n\n  render() {\n    return null;\n  }\n}\n\nAction.propTypes = {\n  name: PropTypes.string.isRequired,\n  action: PropTypes.func.isRequired,\n};\n\nAction.contextTypes = {\n  [PLUGIN_HOST_CONTEXT]: PropTypes.object.isRequired,\n  [POSITION_CONTEXT]: PropTypes.func.isRequired,\n};\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport {\n  isTrackedDependenciesChanged,\n  getAvailableGetters,\n  getAvailableActions,\n} from './helpers';\nimport { PLUGIN_HOST_CONTEXT, POSITION_CONTEXT, UPDATE_CONNECTION_EVENT } from './constants';\n\nexport class Getter extends React.PureComponent {\n  constructor(props, context) {\n    super(props, context);\n\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost, [POSITION_CONTEXT]: positionContext } = context;\n    const { name } = props;\n\n    let lastComputed;\n    let lastTrackedDependencies = {};\n    let lastResult;\n\n    this.plugin = {\n      position: () => positionContext(),\n      [`${name}Getter`]: (original) => {\n        const { value, computed } = this.props;\n        if (computed === undefined) return value;\n\n        const getGetterValue = getterName => ((getterName === name)\n          ? original\n          : pluginHost.get(`${getterName}Getter`, this.plugin));\n\n        if (computed === lastComputed\n          && !isTrackedDependenciesChanged(pluginHost, lastTrackedDependencies, getGetterValue)) {\n          return lastResult;\n        }\n\n        const { getters, trackedDependencies } = getAvailableGetters(pluginHost, getGetterValue);\n        const actions = getAvailableActions(pluginHost);\n\n        lastComputed = computed;\n        lastTrackedDependencies = trackedDependencies;\n        lastResult = computed(getters, actions);\n        return lastResult;\n      },\n    };\n\n    pluginHost.registerPlugin(this.plugin);\n  }\n\n  componentDidUpdate() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.context;\n\n    pluginHost.broadcast(UPDATE_CONNECTION_EVENT);\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.context;\n\n    pluginHost.unregisterPlugin(this.plugin);\n  }\n\n  render() {\n    return null;\n  }\n}\n\nGetter.propTypes = {\n  name: PropTypes.string.isRequired,\n  value: PropTypes.any,\n  computed: PropTypes.func,\n};\n\nGetter.defaultProps = {\n  value: undefined,\n  computed: undefined,\n};\n\nGetter.contextTypes = {\n  [PLUGIN_HOST_CONTEXT]: PropTypes.object.isRequired,\n  [POSITION_CONTEXT]: PropTypes.func.isRequired,\n};\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport {\n  PLUGIN_HOST_CONTEXT, POSITION_CONTEXT, RERENDER_TEMPLATE_EVENT, RERENDER_TEMPLATE_SCOPE_EVENT,\n} from './constants';\n\nlet globalTemplateId = 0;\nexport class Template extends React.PureComponent {\n  constructor(props, context) {\n    super(props, context);\n\n    globalTemplateId += 1;\n    this.id = globalTemplateId;\n\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost, [POSITION_CONTEXT]: positionContext } = context;\n    const { name, predicate } = props;\n\n    this.plugin = {\n      position: () => positionContext(),\n      [`${name}Template`]: {\n        id: this.id,\n        predicate: params => (predicate ? predicate(params) : true),\n        children: () => {\n          const { children } = this.props;\n          return children;\n        },\n      },\n    };\n    pluginHost.registerPlugin(this.plugin);\n    pluginHost.broadcast(RERENDER_TEMPLATE_SCOPE_EVENT, name);\n  }\n\n  componentDidUpdate() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.context;\n    pluginHost.broadcast(RERENDER_TEMPLATE_EVENT, this.id);\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.context;\n    const { name } = this.props;\n    pluginHost.unregisterPlugin(this.plugin);\n    pluginHost.broadcast(RERENDER_TEMPLATE_SCOPE_EVENT, name);\n  }\n\n  render() {\n    return null;\n  }\n}\n\nTemplate.propTypes = {\n  position: PropTypes.func,\n  name: PropTypes.string.isRequired,\n  predicate: PropTypes.func,\n  children: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.node,\n  ]),\n};\n\nTemplate.defaultProps = {\n  predicate: undefined,\n  children: undefined,\n  position: undefined,\n};\n\nTemplate.contextTypes = {\n  [PLUGIN_HOST_CONTEXT]: PropTypes.object.isRequired,\n  [POSITION_CONTEXT]: PropTypes.func.isRequired,\n};\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { PLUGIN_HOST_CONTEXT, UPDATE_CONNECTION_EVENT } from './constants';\nimport {\n  isTrackedDependenciesChanged,\n  getAvailableGetters,\n  getAvailableActions,\n} from './helpers';\n\nexport class TemplateConnector extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.trackedDependencies = {};\n    this.subscription = {\n      [UPDATE_CONNECTION_EVENT]: () => this.updateConnection(),\n    };\n  }\n\n  componentDidMount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.context;\n    pluginHost.registerSubscription(this.subscription);\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.context;\n    pluginHost.unregisterSubscription(this.subscription);\n  }\n\n  updateConnection() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.context;\n\n    if (isTrackedDependenciesChanged(pluginHost, this.trackedDependencies)) {\n      this.forceUpdate();\n    }\n  }\n\n  render() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.context;\n    const { children } = this.props;\n\n    const { getters, trackedDependencies } = getAvailableGetters(pluginHost);\n    this.trackedDependencies = trackedDependencies;\n    const actions = getAvailableActions(pluginHost);\n\n    return children(getters, actions);\n  }\n}\n\nTemplateConnector.propTypes = {\n  children: PropTypes.func.isRequired,\n};\n\nTemplateConnector.contextTypes = {\n  [PLUGIN_HOST_CONTEXT]: PropTypes.object.isRequired,\n};\n","const TIMEOUT = 180;\n\nexport class TouchStrategy {\n  constructor(delegate) {\n    this.delegate = delegate;\n    this.touchStartTimeout = null;\n    this.dragging = false;\n  }\n\n  isDragging() {\n    return this.dragging;\n  }\n\n  isWaiting() {\n    return !!this.touchStartTimeout;\n  }\n\n  cancelWaiting() {\n    clearTimeout(this.touchStartTimeout);\n    this.touchStartTimeout = null;\n  }\n\n  start(e) {\n    const { clientX: x, clientY: y } = e.touches[0];\n    this.touchStartTimeout = setTimeout(() => {\n      this.delegate.onStart({ x, y });\n      this.dragging = true;\n    }, TIMEOUT);\n  }\n\n  move(e) {\n    this.cancelWaiting();\n    if (this.dragging) {\n      const { clientX, clientY } = e.touches[0];\n      e.preventDefault();\n      this.delegate.onMove({ x: clientX, y: clientY });\n    }\n  }\n\n  end(e) {\n    this.cancelWaiting();\n    if (this.dragging) {\n      const { clientX, clientY } = e.changedTouches[0];\n      this.delegate.onEnd({ x: clientX, y: clientY });\n    }\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  }\n}\n","/* globals document:true */\n\nlet gestureCover = null;\nexport const toggleGestureCover = (toggle, cursor) => {\n  let style = {\n    pointerEvents: toggle ? 'all' : 'none',\n  };\n  if (toggle && cursor) {\n    style = {\n      ...style,\n      cursor,\n    };\n  }\n  if (!gestureCover) {\n    style = {\n      ...style,\n      position: 'fixed',\n      top: 0,\n      right: 0,\n      left: 0,\n      bottom: 0,\n      opacity: 0,\n      zIndex: 2147483647,\n    };\n\n    gestureCover = document.createElement('div');\n    document.body.appendChild(gestureCover);\n  }\n  Object.keys(style).forEach((key) => { gestureCover.style[key] = style[key]; });\n};\n","/* globals window:true document:true */\n\nimport { toggleGestureCover } from './gesture-cover';\n\nconst BOUNDARY = 10;\nconst clamp = (value, min, max) => Math.max(Math.min(value, max), min);\nconst isBoundExceeded = (\n  { x: initialX, y: initialY }, { x, y },\n) => clamp(x, initialX - BOUNDARY, initialX + BOUNDARY) !== x\n  || clamp(y, initialY - BOUNDARY, initialY + BOUNDARY) !== y;\n\nexport class MouseStrategy {\n  constructor(delegate) {\n    this.delegate = delegate;\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  }\n\n  isDragging() {\n    return this.dragging;\n  }\n\n  start(e) {\n    const { clientX: x, clientY: y } = e;\n    this.e = e;\n    this.mouseInitialOffset = { x, y };\n  }\n\n  move(e) {\n    const { clientX: x, clientY: y } = e;\n    let dragStarted = false;\n    if (!this.dragging && this.mouseInitialOffset) {\n      if (isBoundExceeded(this.mouseInitialOffset, { x, y })) {\n        this.delegate.onStart(this.mouseInitialOffset);\n        if (window.getSelection) {\n          window.getSelection().removeAllRanges();\n        }\n        dragStarted = true;\n        this.dragging = true;\n      }\n    }\n    if (this.dragging) {\n      e.preventDefault();\n      this.delegate.onMove({ x, y });\n    }\n    if (dragStarted) {\n      const { cursor } = window.getComputedStyle(document.elementFromPoint(x, y));\n      toggleGestureCover(true, cursor);\n    }\n  }\n\n  end(e) {\n    if (this.dragging) {\n      const { clientX: x, clientY: y } = e;\n      toggleGestureCover(false);\n      this.delegate.onEnd({ x, y });\n    }\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  }\n}\n","/* globals window:true */\n\nimport { EventEmitter } from '@devexpress/dx-core';\n\nlet eventEmitter = null;\nexport const getSharedEventEmitter = () => {\n  if (!eventEmitter) {\n    eventEmitter = new EventEmitter();\n\n    ['mousemove', 'mouseup', 'touchmove', 'touchend', 'touchcancel']\n      .forEach(name => window.addEventListener(\n        name, e => eventEmitter.emit([name, e]), { passive: false },\n      ));\n  }\n  return eventEmitter;\n};\n","/* globals document:true window:true */\n\nexport const clear = () => {\n  if (window.getSelection) {\n    if (window.getSelection().empty) {\n      window.getSelection().empty();\n    } else if (window.getSelection().removeAllRanges) {\n      window.getSelection().removeAllRanges();\n    }\n  } else if (document.selection) {\n    document.selection.empty();\n  }\n};\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\n// eslint-disable-next-line camelcase\nimport { unstable_batchedUpdates, findDOMNode } from 'react-dom';\nimport { TouchStrategy } from './draggable/touch-strategy';\nimport { MouseStrategy } from './draggable/mouse-strategy';\nimport { getSharedEventEmitter } from './draggable/shared-events';\nimport { clear } from './draggable/selection-utils';\n\nconst draggingHandled = Symbol('draggingHandled');\n\nexport class Draggable extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n\n    const delegate = {\n      onStart: ({ x, y }) => {\n        const { onStart } = this.props;\n        if (!onStart) return;\n        unstable_batchedUpdates(() => {\n          onStart({ x, y });\n        });\n      },\n      onMove: ({ x, y }) => {\n        const { onUpdate } = this.props;\n        if (!onUpdate) return;\n        unstable_batchedUpdates(() => {\n          onUpdate({ x, y });\n        });\n      },\n      onEnd: ({ x, y }) => {\n        const { onEnd } = this.props;\n        if (!onEnd) return;\n        unstable_batchedUpdates(() => {\n          onEnd({ x, y });\n        });\n      },\n    };\n\n    this.mouseStrategy = new MouseStrategy(delegate);\n    this.touchStrategy = new TouchStrategy(delegate);\n\n    this.mouseDownListener = this.mouseDownListener.bind(this);\n    this.touchStartListener = this.touchStartListener.bind(this);\n    this.globalListener = this.globalListener.bind(this);\n  }\n\n  componentDidMount() {\n    getSharedEventEmitter().subscribe(this.globalListener);\n    this.setupNodeSubscription();\n  }\n\n  shouldComponentUpdate(nextProps) {\n    const { children } = this.props;\n    return nextProps.children !== children;\n  }\n\n  componentDidUpdate() {\n    this.setupNodeSubscription();\n  }\n\n  componentWillUnmount() {\n    getSharedEventEmitter().unsubscribe(this.globalListener);\n  }\n\n  setupNodeSubscription() {\n    // eslint-disable-next-line react/no-find-dom-node\n    const node = findDOMNode(this);\n    if (!node) return;\n    node.removeEventListener('mousedown', this.mouseDownListener);\n    node.removeEventListener('touchstart', this.touchStartListener);\n    node.addEventListener('mousedown', this.mouseDownListener, { passive: true });\n    node.addEventListener('touchstart', this.touchStartListener, { passive: true });\n  }\n\n  mouseDownListener(e) {\n    if (this.touchStrategy.isWaiting() || e[draggingHandled]) return;\n    this.mouseStrategy.start(e);\n    e[draggingHandled] = true;\n  }\n\n  touchStartListener(e) {\n    if (e[draggingHandled]) return;\n    this.touchStrategy.start(e);\n    e[draggingHandled] = true;\n  }\n\n  globalListener([name, e]) {\n    switch (name) {\n      case 'mousemove':\n        this.mouseStrategy.move(e);\n        break;\n      case 'mouseup':\n        this.mouseStrategy.end(e);\n        break;\n      case 'touchmove': {\n        this.touchStrategy.move(e);\n        break;\n      }\n      case 'touchend':\n      case 'touchcancel': {\n        this.touchStrategy.end(e);\n        break;\n      }\n      default:\n        break;\n    }\n    if (this.mouseStrategy.isDragging() || this.touchStrategy.isDragging()) {\n      clear();\n    }\n  }\n\n  render() {\n    const { children } = this.props;\n    return children;\n  }\n}\n\nDraggable.propTypes = {\n  children: PropTypes.node.isRequired,\n  onStart: PropTypes.func,\n  onUpdate: PropTypes.func,\n  onEnd: PropTypes.func,\n};\n\nDraggable.defaultProps = {\n  onStart: undefined,\n  onUpdate: undefined,\n  onEnd: undefined,\n};\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\n\nimport { EventEmitter } from '@devexpress/dx-core';\n\nclass DragDropProviderCore {\n  constructor() {\n    this.payload = null;\n    this.dragEmitter = new EventEmitter();\n  }\n\n  start(payload, clientOffset) {\n    this.payload = payload;\n    this.dragEmitter.emit({ payload: this.payload, clientOffset });\n  }\n\n  update(clientOffset) {\n    this.dragEmitter.emit({ payload: this.payload, clientOffset });\n  }\n\n  end(clientOffset) {\n    this.dragEmitter.emit({ payload: this.payload, clientOffset, end: true });\n    this.payload = null;\n  }\n}\n\nexport class DragDropProvider extends React.Component {\n  constructor(props) {\n    super(props);\n    const { onChange } = this.props;\n\n    this.dragDropProvider = new DragDropProviderCore();\n\n    this.dragDropProvider.dragEmitter.subscribe(({ payload, clientOffset, end }) => {\n      onChange({\n        payload: end ? null : payload,\n        clientOffset: end ? null : clientOffset,\n      });\n    });\n  }\n\n  getChildContext() {\n    return {\n      dragDropProvider: this.dragDropProvider,\n    };\n  }\n\n  shouldComponentUpdate(nextProps) {\n    const { children } = this.props;\n    return nextProps.children !== children;\n  }\n\n  render() {\n    const { children } = this.props;\n    return children;\n  }\n}\n\nDragDropProvider.childContextTypes = {\n  dragDropProvider: PropTypes.object.isRequired,\n};\n\nDragDropProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  onChange: PropTypes.func,\n};\n\nDragDropProvider.defaultProps = {\n  onChange: () => {},\n};\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { Draggable } from '../draggable';\n\nexport class DragSource extends React.Component {\n  shouldComponentUpdate(nextProps) {\n    const { children } = this.props;\n    return nextProps.children !== children;\n  }\n\n  render() {\n    const { dragDropProvider } = this.context;\n    const {\n      onStart, onUpdate, onEnd, payload, children,\n    } = this.props;\n    return (\n      <Draggable\n        onStart={({ x, y }) => {\n          dragDropProvider.start(payload, { x, y });\n          onStart({ clientOffset: { x, y } });\n        }}\n        onUpdate={({ x, y }) => {\n          dragDropProvider.update({ x, y });\n          onUpdate({ clientOffset: { x, y } });\n        }}\n        onEnd={({ x, y }) => {\n          dragDropProvider.end({ x, y });\n          onEnd({ clientOffset: { x, y } });\n        }}\n      >\n        {children}\n      </Draggable>\n    );\n  }\n}\n\nDragSource.contextTypes = {\n  dragDropProvider: PropTypes.object.isRequired,\n};\n\nDragSource.propTypes = {\n  children: PropTypes.node.isRequired,\n  payload: PropTypes.any.isRequired,\n  onStart: PropTypes.func,\n  onUpdate: PropTypes.func,\n  onEnd: PropTypes.func,\n};\n\nDragSource.defaultProps = {\n  onStart: () => {},\n  onUpdate: () => {},\n  onEnd: () => {},\n};\n","import * as React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport * as PropTypes from 'prop-types';\n\nconst clamp = (value, min, max) => Math.max(Math.min(value, max), min);\n\nexport class DropTarget extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.node = null;\n    this.isOver = false;\n\n    this.handleDrag = this.handleDrag.bind(this);\n  }\n\n  componentDidMount() {\n    const { dragDropProvider: { dragEmitter } } = this.context;\n    dragEmitter.subscribe(this.handleDrag);\n  }\n\n  shouldComponentUpdate(nextProps) {\n    const { children } = this.props;\n    return nextProps.children !== children;\n  }\n\n  componentWillUnmount() {\n    const { dragDropProvider: { dragEmitter } } = this.context;\n    dragEmitter.unsubscribe(this.handleDrag);\n  }\n\n  handleDrag({ payload, clientOffset, end }) {\n    const {\n      left,\n      top,\n      right,\n      bottom,\n    } = findDOMNode(this).getBoundingClientRect(); // eslint-disable-line react/no-find-dom-node\n    const {\n      onDrop, onEnter, onLeave, onOver,\n    } = this.props;\n    const isOver = clientOffset\n      && clamp(clientOffset.x, left, right) === clientOffset.x\n      && clamp(clientOffset.y, top, bottom) === clientOffset.y;\n\n    if (!this.isOver && isOver) onEnter({ payload, clientOffset });\n    if (this.isOver && isOver) onOver({ payload, clientOffset });\n    if (this.isOver && !isOver) onLeave({ payload, clientOffset });\n    if (isOver && end) onDrop({ payload, clientOffset });\n\n    this.isOver = isOver && !end;\n  }\n\n  render() {\n    const { children } = this.props;\n    return React.Children.only(children);\n  }\n}\n\nDropTarget.contextTypes = {\n  dragDropProvider: PropTypes.object.isRequired,\n};\n\nDropTarget.propTypes = {\n  children: PropTypes.node.isRequired,\n  onEnter: PropTypes.func,\n  onOver: PropTypes.func,\n  onLeave: PropTypes.func,\n  onDrop: PropTypes.func,\n};\n\nDropTarget.defaultProps = {\n  onEnter: () => {},\n  onOver: () => {},\n  onLeave: () => {},\n  onDrop: () => {},\n};\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\n\nexport class RefHolder extends React.PureComponent {\n  render() {\n    const { children } = this.props;\n    return children;\n  }\n}\n\nRefHolder.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n","/* globals document:true */\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { findDOMNode } from 'react-dom';\nimport { RefHolder } from './ref-holder';\n\nconst styles = {\n  root: {\n    position: 'relative',\n  },\n  triggersRoot: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'hidden',\n    zIndex: -1,\n    visibility: 'hidden',\n    opacity: 0,\n  },\n  expandTrigger: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'auto',\n  },\n  contractTrigger: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'auto',\n    minHeight: '1px',\n    minWidth: '1px',\n  },\n  contractNotifier: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '200%',\n    height: '200%',\n  },\n};\n\nexport class Sizer extends React.PureComponent {\n  constructor() {\n    super();\n\n    this.setupListeners = this.setupListeners.bind(this);\n  }\n\n  componentDidMount() {\n    this.createListeners();\n    this.setupListeners();\n  }\n\n  setupListeners() {\n    // eslint-disable-next-line react/no-find-dom-node\n    const rootNode = findDOMNode(this.root);\n    const size = { height: rootNode.clientHeight, width: rootNode.clientWidth };\n\n    this.contractTrigger.scrollTop = size.height;\n    this.contractTrigger.scrollLeft = size.width;\n\n    this.expandNotifier.style.width = `${size.width + 1}px`;\n    this.expandNotifier.style.height = `${size.height + 1}px`;\n    this.expandTrigger.scrollTop = 1;\n    this.expandTrigger.scrollLeft = 1;\n\n    const { onSizeChange } = this.props;\n    onSizeChange(size);\n  }\n\n  createListeners() {\n    // eslint-disable-next-line react/no-find-dom-node\n    const rootNode = findDOMNode(this.root);\n\n    this.triggersRoot = document.createElement('div');\n    Object.assign(this.triggersRoot.style, styles.triggersRoot);\n    rootNode.appendChild(this.triggersRoot);\n\n    this.expandTrigger = document.createElement('div');\n    Object.assign(this.expandTrigger.style, styles.expandTrigger);\n    this.expandTrigger.addEventListener('scroll', this.setupListeners);\n    this.triggersRoot.appendChild(this.expandTrigger);\n\n    this.expandNotifier = document.createElement('div');\n    this.expandTrigger.appendChild(this.expandNotifier);\n\n    this.contractTrigger = document.createElement('div');\n    Object.assign(this.contractTrigger.style, styles.contractTrigger);\n    this.contractTrigger.addEventListener('scroll', this.setupListeners);\n    this.triggersRoot.appendChild(this.contractTrigger);\n\n    this.contractNotifier = document.createElement('div');\n    Object.assign(this.contractNotifier.style, styles.contractNotifier);\n    this.contractTrigger.appendChild(this.contractNotifier);\n  }\n\n  render() {\n    const {\n      onSizeChange,\n      containerComponent: Container,\n      style,\n      ...restProps\n    } = this.props;\n\n    return (\n      <RefHolder\n        ref={(ref) => { this.root = ref; }}\n      >\n        <Container\n          style={{ ...styles.root, ...style }}\n          {...restProps}\n        />\n      </RefHolder>\n    );\n  }\n}\n\nSizer.propTypes = {\n  onSizeChange: PropTypes.func.isRequired,\n  containerComponent: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  style: PropTypes.object,\n};\n\nSizer.defaultProps = {\n  containerComponent: 'div',\n  style: null,\n};\n","import * as React from 'react';\n\nexport const connectProps = (WrappedComponent, getAdditionalProps) => {\n  let storedAdditionalProps = getAdditionalProps();\n  const components = new Set();\n  class RenderComponent extends React.PureComponent {\n    componentDidMount() {\n      components.add(this);\n    }\n\n    componentWillUnmount() {\n      components.delete(this);\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} {...storedAdditionalProps} />;\n    }\n  }\n  RenderComponent.update = () => {\n    storedAdditionalProps = getAdditionalProps();\n    Array.from(components.values()).forEach(component => component.forceUpdate());\n  };\n  return RenderComponent;\n};\n","export const createStateHelper = (component, controlledStateProperties = {}) => {\n  const notifyStateChange = (nextState, state) => {\n    Object.keys(controlledStateProperties).forEach((propertyName) => {\n      const changeEvent = controlledStateProperties[propertyName]();\n      if (changeEvent && nextState[propertyName] !== state[propertyName]) {\n        changeEvent(nextState[propertyName]);\n      }\n    });\n  };\n\n  let lastStateUpdater = null;\n  let initialState = null;\n  let lastInitialState = null;\n  const applyReducer = (reduce, payload, callback) => {\n    const stateUpdater = (prevState) => {\n      if (initialState === null) {\n        initialState = prevState;\n      }\n      const stateChange = reduce({ ...prevState }, payload);\n      const state = { ...prevState, ...stateChange };\n\n      if (typeof callback === 'function') {\n        callback(state, prevState);\n      }\n      if (stateUpdater === lastStateUpdater) {\n        if (lastInitialState !== initialState) {\n          notifyStateChange(state, initialState);\n          lastInitialState = initialState;\n        }\n        initialState = null;\n      }\n\n      return stateChange;\n    };\n    lastStateUpdater = stateUpdater;\n    component.setState(stateUpdater);\n  };\n  const applyFieldReducer = (field, reduce, payload) => {\n    applyReducer(state => ({\n      [field]: reduce(state[field], payload),\n    }));\n  };\n\n  return {\n    applyReducer,\n    applyFieldReducer,\n  };\n};\n","import * as React from 'react';\n\nconst makeBoundComponent = (Target, components, exposed) => {\n  class Component extends React.PureComponent {\n    render() {\n      return <Target {...components} {...this.props} />;\n    }\n  }\n  Component.components = Target.components;\n  Object.assign(Component, exposed);\n  return Component;\n};\n\nexport const withComponents = components => (Target) => {\n  const props = {};\n  const exposed = {};\n  Object.entries(Target.components).forEach(([fieldName, componentName]) => {\n    const component = components[componentName];\n    if (component && component !== Target[componentName]) {\n      props[fieldName] = component;\n    }\n    exposed[componentName] = component || Target[componentName];\n  });\n  return Object.keys(props).length > 0\n    ? makeBoundComponent(Target, props, exposed) : Target;\n};\n"],"names":["PLUGIN_HOST_CONTEXT","POSITION_CONTEXT","TEMPLATE_HOST_CONTEXT","RERENDER_TEMPLATE_EVENT","Symbol","RERENDER_TEMPLATE_SCOPE_EVENT","UPDATE_CONNECTION_EVENT","PluginIndexer","children","position","React.createElement","React","map","child","index","type","childPosition","calculatedPosition","propTypes","PropTypes","defaultProps","undefined","contextTypes","PluginIndexerContext","props","isRequired","childContextTypes","TemplatePlaceholder","context","propsName","name","subscription","id","template","forceUpdate","templates","restTemplates","params","pluginHost","registerSubscription","nextProps","getRenderingData","shallowEqual","unregisterSubscription","collect","filter","predicate","reverse","templateHost","slice","content","templateContent","templatePlaceholder","PluginHost","host","PluginHostCore","Plugin","dependencies","plugin","container","registerPlugin","ensureDependencies","unregisterPlugin","optional","getAvailableGetters","getGetterValue","get","getterName","trackedDependencies","getters","Proxy","target","prop","result","getOwnPropertyDescriptor","configurable","enumerable","value","ownKeys","knownKeys","reduce","acc","Object","defineProperty","isTrackedDependenciesChanged","prevTrackedDependencies","keys","assign","getAvailableActions","getAction","actionName","actions","Action","positionContext","action","nextParams","newParams","nextAction","Getter","lastComputed","lastTrackedDependencies","lastResult","original","computed","broadcast","globalTemplateId","Template","TemplateConnector","updateConnection","TIMEOUT","TouchStrategy","delegate","touchStartTimeout","dragging","clearTimeout","e","touches","x","clientX","y","clientY","setTimeout","onStart","cancelWaiting","preventDefault","onMove","changedTouches","onEnd","mouseInitialOffset","gestureCover","toggleGestureCover","toggle","cursor","style","pointerEvents","top","right","left","bottom","opacity","zIndex","document","createElement","body","appendChild","forEach","key","BOUNDARY","clamp","min","max","Math","isBoundExceeded","initialX","initialY","MouseStrategy","dragStarted","window","getSelection","removeAllRanges","getComputedStyle","elementFromPoint","eventEmitter","getSharedEventEmitter","EventEmitter","addEventListener","emit","passive","clear","empty","selection","draggingHandled","Draggable","unstable_batchedUpdates","onUpdate","mouseStrategy","touchStrategy","mouseDownListener","bind","touchStartListener","globalListener","subscribe","setupNodeSubscription","unsubscribe","node","findDOMNode","removeEventListener","isWaiting","start","move","end","isDragging","DragDropProviderCore","payload","dragEmitter","clientOffset","DragDropProvider","onChange","dragDropProvider","DragSource","update","DropTarget","isOver","handleDrag","getBoundingClientRect","onDrop","onEnter","onLeave","onOver","only","RefHolder","styles","root","triggersRoot","height","width","overflow","visibility","expandTrigger","contractTrigger","minHeight","minWidth","contractNotifier","Sizer","setupListeners","createListeners","rootNode","size","clientHeight","clientWidth","scrollTop","scrollLeft","expandNotifier","onSizeChange","Container","containerComponent","restProps","ref","connectProps","WrappedComponent","getAdditionalProps","storedAdditionalProps","components","Set","RenderComponent","add","delete","Array","from","values","component","createStateHelper","controlledStateProperties","notifyStateChange","nextState","state","propertyName","changeEvent","lastStateUpdater","initialState","lastInitialState","applyReducer","callback","stateUpdater","prevState","stateChange","setState","applyFieldReducer","field","makeBoundComponent","Target","exposed","Component","withComponents","entries","fieldName","componentName","length"],"mappings":"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"}