{"version":3,"file":"dx-core.umd.js","sources":["../src/utils.js","../src/plugin-host.js","../src/event-emitter.js","../src/shallow-equal.js","../src/memoize.js","../src/easings.js","../src/messages-formatter.js"],"sourcesContent":["const DELAY = 200;\n\nconst compare = (a, b) => {\n  const aPosition = a.position();\n  const bPosition = b.position();\n  for (let i = 0; i < Math.min(aPosition.length, bPosition.length); i += 1) {\n    if (aPosition[i] < bPosition[i]) return -1;\n    if (aPosition[i] > bPosition[i]) return 1;\n  }\n  return aPosition.length - bPosition.length;\n};\n\nexport const insertPlugin = (array, newItem) => {\n  const result = array.slice();\n  const nextItemIndex = array.findIndex(item => compare(newItem, item) <= 0);\n  const targetIndex = nextItemIndex < 0 ? array.length : nextItemIndex;\n  const alreadyExists = (targetIndex >= 0 && targetIndex < array.length)\n    && compare(newItem, array[targetIndex]) === 0;\n  result.splice(targetIndex, alreadyExists ? 1 : 0, newItem);\n  return result;\n};\n\nexport const createClickHandlers = (click, dblClick) => {\n  let timeoutId;\n  const onClick = click ? (e) => {\n    if (!timeoutId) {\n      timeoutId = setTimeout(() => {\n        clearTimeout(timeoutId);\n        click(e);\n      }, DELAY);\n    }\n  } : undefined;\n  const onDoubleClick = dblClick ? (e) => {\n    clearTimeout(timeoutId);\n    dblClick(e);\n  } : undefined;\n\n  return {\n    onClick,\n    onDoubleClick,\n  };\n};\n","import { insertPlugin } from './utils';\n\nconst getDependencyError = (pluginName, dependencyName) => new Error(`The '${pluginName}' plugin requires '${dependencyName}' to be defined before it.`);\n\nexport class PluginHost {\n  constructor() {\n    this.plugins = [];\n    this.subscriptions = new Set();\n    this.gettersCache = {};\n  }\n\n  ensureDependencies() {\n    const defined = new Set();\n    const knownOptionals = new Map();\n    this.plugins\n      .filter(plugin => plugin.container)\n      .forEach((plugin) => {\n        if (knownOptionals.has(plugin.name)) {\n          throw (getDependencyError(knownOptionals.get(plugin.name), plugin.name));\n        }\n\n        plugin.dependencies\n          .forEach((dependency) => {\n            if (defined.has(dependency.name)) return;\n            if (dependency.optional) {\n              if (!knownOptionals.has(dependency.name)) {\n                knownOptionals.set(dependency.name, plugin.name);\n              }\n              return;\n            }\n            throw (getDependencyError(plugin.name, dependency.name));\n          });\n\n        defined.add(plugin.name);\n      });\n  }\n\n  registerPlugin(plugin) {\n    this.plugins = insertPlugin(this.plugins, plugin);\n    this.cleanPluginsCache();\n  }\n\n  unregisterPlugin(plugin) {\n    this.plugins.splice(this.plugins.indexOf(plugin), 1);\n    this.cleanPluginsCache();\n  }\n\n  cleanPluginsCache() {\n    this.validationRequired = true;\n    this.gettersCache = {};\n    this.knownKeysCache = {};\n  }\n\n  knownKeys(postfix) {\n    if (!this.knownKeysCache[postfix]) {\n      this.knownKeysCache[postfix] = Array.from(this.plugins\n        .map(plugin => Object.keys(plugin))\n        .map(keys => keys.filter(key => key.endsWith(postfix))[0])\n        .filter(key => !!key)\n        .reduce((acc, key) => acc.add(key), new Set()))\n        .map(key => key.replace(postfix, ''));\n    }\n    return this.knownKeysCache[postfix];\n  }\n\n  collect(key, upTo) {\n    if (this.validationRequired) {\n      this.ensureDependencies();\n      this.validationRequired = false;\n    }\n\n    if (!this.gettersCache[key]) {\n      this.gettersCache[key] = this.plugins.map(plugin => plugin[key]).filter(plugin => !!plugin);\n    }\n    if (!upTo) return this.gettersCache[key];\n\n    const upToIndex = this.plugins.indexOf(upTo);\n    return this.gettersCache[key].filter((getter) => {\n      const pluginIndex = this.plugins.findIndex(plugin => plugin[key] === getter);\n      return pluginIndex < upToIndex;\n    });\n  }\n\n  get(key, upTo) {\n    const plugins = this.collect(key, upTo);\n\n    if (!plugins.length) return undefined;\n\n    let result = plugins[0]();\n    plugins.slice(1).forEach((plugin) => {\n      result = plugin(result);\n    });\n    return result;\n  }\n\n  registerSubscription(subscription) {\n    this.subscriptions.add(subscription);\n  }\n\n  unregisterSubscription(subscription) {\n    this.subscriptions.delete(subscription);\n  }\n\n  broadcast(event, message) {\n    this.subscriptions.forEach(subscription => subscription[event] && subscription[event](message));\n  }\n}\n","export class EventEmitter {\n  constructor() {\n    this.handlers = [];\n  }\n\n  emit(e) {\n    this.handlers.forEach(handler => handler(e));\n  }\n\n  subscribe(handler) {\n    this.handlers.push(handler);\n  }\n\n  unsubscribe(handler) {\n    this.handlers.splice(this.handlers.indexOf(handler), 1);\n  }\n}\n","export function shallowEqual(objA, objB) {\n  if (objA === objB) {\n    return true;\n  }\n\n  const keysA = Object.keys(objA);\n  const keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  // Test for A's keys different from B.\n  const hasOwn = Object.prototype.hasOwnProperty;\n  for (let i = 0; i < keysA.length; i += 1) {\n    if (!hasOwn.call(objB, keysA[i])\n        || objA[keysA[i]] !== objB[keysA[i]]) {\n      return false;\n    }\n\n    const valA = objA[keysA[i]];\n    const valB = objB[keysA[i]];\n\n    if (valA !== valB) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function argumentsShallowEqual(prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  }\n\n  for (let i = 0; i < prev.length; i += 1) {\n    if (prev[i] !== next[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","import { argumentsShallowEqual } from './shallow-equal';\n\nexport const memoize = (func) => {\n  let lastArgs = null;\n  let lastResult = null;\n  return (...args) => {\n    if (lastArgs === null || !argumentsShallowEqual(lastArgs, args)) {\n      lastResult = func(...args);\n    }\n    lastArgs = args;\n    return lastResult;\n  };\n};\n","export const easeInQuad = t => t * t;\nexport const easeOutQuad = t => t * (2 - t);\nexport const easeInOutQuad = t => (t < 0.5\n  ? 2 * t * t\n  : -1 + ((4 - (2 * t)) * t));\n\nexport const easeInCubic = t => t * t * t;\nexport const easeOutCubic = t => ((t - 1) * (t - 1) * (t - 1)) + 1;\nexport const easeInOutCubic = t => (t < 0.5\n  ? 4 * t * t * t\n  : ((t - 1) * ((2 * t) - 2) * ((2 * t) - 2)) + 1);\n\nexport const easeInQuart = t => t * t * t * t;\nexport const easeOutQuart = t => 1 - ((t - 1) * (t - 1) * (t - 1) * (t - 1));\nexport const easeInOutQuart = t => (t < 0.5\n  ? 8 * t * t * t * t\n  : 1 - (8 * (t - 1) * (t - 1) * (t - 1) * (t - 1)));\n\nexport const easeInQuint = t => t * t * t * t * t;\nexport const easeOutQuint = t => 1 + ((t - 1) * (t - 1) * (t - 1) * (t - 1) * (t - 1));\nexport const easeInOutQuint = t => (t < 0.5\n  ? 16 * t * t * t * t * t\n  : 1 + (16 * (t - 1) * (t - 1) * (t - 1) * (t - 1) * (t - 1)));\n","const processPattern = (pattern, params) => Object.keys(params).reduce(\n  (msg, key) => msg.replace(`{${key}}`, params[key]),\n  pattern,\n);\n\nexport const getMessagesFormatter = messages => (key, params) => {\n  const message = messages[key];\n\n  if (typeof message === 'function') {\n    return message(params);\n  }\n  if (params) {\n    return processPattern(message, params);\n  }\n  return message;\n};\n"],"names":["DELAY","compare","a","b","aPosition","position","bPosition","i","Math","min","length","insertPlugin","array","newItem","result","slice","nextItemIndex","findIndex","item","targetIndex","alreadyExists","splice","createClickHandlers","click","dblClick","timeoutId","onClick","e","setTimeout","clearTimeout","undefined","onDoubleClick","getDependencyError","pluginName","dependencyName","Error","PluginHost","plugins","subscriptions","Set","gettersCache","defined","knownOptionals","Map","filter","plugin","container","forEach","has","name","get","dependencies","dependency","optional","set","add","cleanPluginsCache","indexOf","validationRequired","knownKeysCache","postfix","Array","from","map","Object","keys","key","endsWith","reduce","acc","replace","upTo","ensureDependencies","upToIndex","getter","pluginIndex","collect","subscription","delete","event","message","EventEmitter","handlers","handler","push","shallowEqual","objA","objB","keysA","keysB","hasOwn","prototype","hasOwnProperty","call","valA","valB","argumentsShallowEqual","prev","next","memoize","func","lastArgs","lastResult","args","easeInQuad","t","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","processPattern","pattern","params","msg","getMessagesFormatter","messages"],"mappings":"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"}